/* ========================================
   EFFETTI TESTO PERSONAGGI JJK
   ======================================== */

/* ----------------------------------------
   CURSED BLOOD - Solo Sukuna
   Gocce di sangue che cadono dalle lettere
   ---------------------------------------- */
@keyframes bloodDrop {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0.8;
  }
  100% {
    transform: translateY(40px) scale(0.5);
    opacity: 0;
  }
}

@keyframes bloodPulse {
  0%, 100% {
    text-shadow: 
      0 0 10px rgba(220, 38, 38, 0.8),
      0 0 20px rgba(220, 38, 38, 0.6),
      0 0 40px rgba(153, 27, 27, 0.4);
  }
  50% {
    text-shadow: 
      0 0 20px rgba(220, 38, 38, 1),
      0 0 40px rgba(220, 38, 38, 0.8),
      0 0 60px rgba(153, 27, 27, 0.6);
  }
}

.cursed-blood {
  position: relative;
  animation: bloodPulse 2s ease-in-out infinite;
}

.cursed-blood::before,
.cursed-blood::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 8px;
  background: linear-gradient(180deg, #dc2626 0%, #7f1d1d 100%);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  opacity: 0;
}

.cursed-blood::before {
  left: 20%;
  top: 100%;
  animation: bloodDrop 1.5s ease-in infinite;
  animation-delay: 0.2s;
}

.cursed-blood::after {
  left: 70%;
  top: 100%;
  animation: bloodDrop 1.8s ease-in infinite;
  animation-delay: 0.8s;
}

/* Gocce extra con span */
.cursed-blood .blood-drop-1,
.cursed-blood .blood-drop-2,
.cursed-blood .blood-drop-3 {
  position: absolute;
  width: 3px;
  height: 6px;
  background: linear-gradient(180deg, #991b1b 0%, #450a0a 100%);
  border-radius: 50%;
  opacity: 0;
  animation: bloodDrop 2s ease-in infinite;
}

.cursed-blood .blood-drop-1 {
  left: 10%;
  top: 100%;
  animation-delay: 0s;
}

.cursed-blood .blood-drop-2 {
  left: 45%;
  top: 100%;
  animation-delay: 1.2s;
}

.cursed-blood .blood-drop-3 {
  left: 85%;
  top: 100%;
  animation-delay: 0.5s;
}

/* ----------------------------------------
   FROST GLITCH - Solo Gojo
   Lettere che tremano e congelano
   ---------------------------------------- */
@keyframes frostShake {
  0%, 100% {
    transform: translate(0, 0) skewX(0);
  }
  10% {
    transform: translate(-2px, 1px) skewX(-2deg);
  }
  20% {
    transform: translate(2px, -1px) skewX(2deg);
  }
  30% {
    transform: translate(-1px, 2px) skewX(-1deg);
  }
  40% {
    transform: translate(1px, -2px) skewX(1deg);
  }
  50% {
    transform: translate(-3px, 1px) skewX(-3deg);
  }
  60% {
    transform: translate(3px, -1px) skewX(3deg);
  }
  70% {
    transform: translate(-1px, -2px) skewX(-1deg);
  }
  80% {
    transform: translate(1px, 2px) skewX(1deg);
  }
  90% {
    transform: translate(-2px, -1px) skewX(-2deg);
  }
}

@keyframes frostGlow {
  0%, 100% {
    text-shadow: 
      0 0 10px rgba(6, 182, 212, 0.6),
      0 0 20px rgba(6, 182, 212, 0.4),
      0 0 40px rgba(59, 130, 246, 0.3);
    filter: hue-rotate(0deg);
  }
  50% {
    text-shadow: 
      0 0 20px rgba(6, 182, 212, 0.9),
      0 0 40px rgba(6, 182, 212, 0.7),
      0 0 60px rgba(59, 130, 246, 0.5),
      0 0 80px rgba(255, 255, 255, 0.3);
    filter: hue-rotate(10deg);
  }
}

@keyframes frostIce {
  0%, 100% {
    clip-path: polygon(
      0% 0%, 100% 0%, 100% 100%, 0% 100%
    );
  }
  25% {
    clip-path: polygon(
      2% 5%, 98% 0%, 100% 95%, 0% 100%
    );
  }
  50% {
    clip-path: polygon(
      0% 2%, 100% 5%, 98% 100%, 2% 95%
    );
  }
  75% {
    clip-path: polygon(
      3% 0%, 97% 3%, 100% 98%, 0% 97%
    );
  }
}

.frost-glitch {
  position: relative;
  animation: 
    frostShake 0.3s steps(10) infinite,
    frostGlow 3s ease-in-out infinite;
}

.frost-glitch::before,
.frost-glitch::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: inherit;
  -webkit-background-clip: text;
  background-clip: text;
}

.frost-glitch::before {
  left: 2px;
  text-shadow: -2px 0 #06b6d4;
  animation: frostShake 0.3s steps(10) infinite reverse;
  opacity: 0.7;
}

.frost-glitch::after {
  left: -2px;
  text-shadow: 2px 0 #3b82f6;
  animation: frostShake 0.4s steps(10) infinite;
  opacity: 0.7;
}

/* Effetto ghiaccio sul bordo */
.frost-glitch.locked::before {
  content: '';
  position: absolute;
  inset: -4px;
  background: linear-gradient(45deg, 
    transparent 40%, 
    rgba(6, 182, 212, 0.3) 50%, 
    transparent 60%
  );
  animation: frostIce 4s ease-in-out infinite;
  pointer-events: none;
}

/* ----------------------------------------
   WAVE MOTION - Tutti in idle
   Lettere che fluttuano come onde
   ---------------------------------------- */
@keyframes waveFloat {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
  }
  25% {
    transform: translateY(-4px) rotate(1deg);
  }
  50% {
    transform: translateY(0) rotate(0deg);
  }
  75% {
    transform: translateY(4px) rotate(-1deg);
  }
}

@keyframes waveGlow {
  0%, 100% {
    opacity: 0.5;
    filter: blur(0px);
  }
  50% {
    opacity: 0.8;
    filter: blur(1px);
  }
}

.wave-motion {
  display: inline-block;
  animation: waveFloat 3s ease-in-out infinite;
}

/* Onda ritardata per ogni lettera (se applicato via JS) */
.wave-motion .wave-letter {
  display: inline-block;
  animation: waveFloat 2.5s ease-in-out infinite;
}

.wave-motion .wave-letter:nth-child(1) { animation-delay: 0s; }
.wave-motion .wave-letter:nth-child(2) { animation-delay: 0.1s; }
.wave-motion .wave-letter:nth-child(3) { animation-delay: 0.2s; }
.wave-motion .wave-letter:nth-child(4) { animation-delay: 0.3s; }
.wave-motion .wave-letter:nth-child(5) { animation-delay: 0.4s; }
.wave-motion .wave-letter:nth-child(6) { animation-delay: 0.5s; }
.wave-motion .wave-letter:nth-child(7) { animation-delay: 0.6s; }
.wave-motion .wave-letter:nth-child(8) { animation-delay: 0.7s; }
.wave-motion .wave-letter:nth-child(9) { animation-delay: 0.8s; }
.wave-motion .wave-letter:nth-child(10) { animation-delay: 0.9s; }
.wave-motion .wave-letter:nth-child(11) { animation-delay: 1s; }
.wave-motion .wave-letter:nth-child(12) { animation-delay: 1.1s; }
.wave-motion .wave-letter:nth-child(13) { animation-delay: 1.2s; }
.wave-motion .wave-letter:nth-child(14) { animation-delay: 1.3s; }
.wave-motion .wave-letter:nth-child(15) { animation-delay: 1.4s; }

/* Glow wave sotto il testo */
.wave-motion::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: -10px;
  height: 20px;
  background: radial-gradient(ellipse at center, 
    rgba(139, 92, 246, 0.3) 0%, 
    transparent 70%
  );
  animation: waveGlow 2s ease-in-out infinite;
  pointer-events: none;
}

/* ----------------------------------------
   Effetti hover combinati
   ---------------------------------------- */
.text-locked-sukuna {
  animation: 
    bloodPulse 2s ease-in-out infinite,
    waveFloat 3s ease-in-out infinite;
}

.text-locked-gojo {
  animation: 
    frostShake 0.3s steps(10) infinite,
    frostGlow 3s ease-in-out infinite;
}

.text-locked-others {
  animation: waveFloat 3s ease-in-out infinite;
}

/* ----------------------------------------
   DOUBLE TEXT 3D - Effetto profondit√†
   Testo duplicato con offset per 3D
   ---------------------------------------- */
.text-3d {
  position: relative;
  display: inline-block;
  perspective: 1000px;
}

/* Layer posteriore - l'ombra/profondit√† */
.text-3d-back {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  letter-spacing: inherit;
  
  /* Offset iniziale sottile */
  transform: translate(3px, 3px);
  
  /* Colore dal CSS variable */
  color: var(--depth-color, rgba(139, 92, 246, 0.3));
  opacity: var(--depth-opacity, 0.4);
  
  /* Nessuna selezione */
  user-select: none;
  pointer-events: none;
  
  /* Transizione fluida */
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* Z-index dietro */
  z-index: 0;
}

/* Layer frontale - il testo principale */
.text-3d-front {
  position: relative;
  display: inline-block;
  z-index: 1;
  
  /* Transizione per il movimento */
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* Fix per gradiente */
  background-clip: text;
  -webkit-background-clip: text;
}

/* Stato attivo (locked) - pi√π profondit√† */
.text-3d-active .text-3d-back {
  transform: translate(6px, 6px) scale(1.02);
  opacity: 0.7;
}

/* Il testo frontale rimane fermo, solo l'ombra si sposta */

/* Hover state - profondit√† intermedia */
.text-3d:hover .text-3d-back {
  transform: translate(5px, 5px);
  opacity: 0.6;
}

.text-3d:hover .text-3d-front {
  transform: translate(-1px, -1px);
}

/* Effetto 3D aggiuntivo con text-shadow sul layer back */
.text-3d-back {
  text-shadow: 
    2px 2px 4px rgba(0, 0, 0, 0.3),
    4px 4px 8px rgba(0, 0, 0, 0.2);
}

/* Animazione fluttuante 3D quando locked */
@keyframes float3D {
  0%, 100% {
    transform: translate(6px, 6px) translateZ(0);
  }
  50% {
    transform: translate(8px, 4px) translateZ(10px);
  }
}

.text-3d-active .text-3d-back {
  animation: float3D 3s ease-in-out infinite;
}

/* ========================================
   EFFETTI CARD PERSONAGGI
   ======================================== */

/* üî• Fire Aura - Fiamme che tremolano */
@keyframes fireFlicker {
  0% {
    opacity: 0.6;
    transform: scaleY(1);
  }
  100% {
    opacity: 0.9;
    transform: scaleY(1.1);
  }
}

@keyframes fireParticles {
  0% {
    transform: translateY(0) scale(1);
    opacity: 0.8;
  }
  100% {
    transform: translateY(-30px) scale(0.5);
    opacity: 0;
  }
}

.fire-particles::before,
.fire-particles::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 4px;
  background: radial-gradient(circle, #f97316 0%, #ef4444 100%);
  border-radius: 50%;
  animation: fireParticles 1.5s ease-out infinite;
}

.fire-particles::before {
  left: 20%;
  bottom: 10%;
  animation-delay: 0s;
}

.fire-particles::after {
  left: 60%;
  bottom: 5%;
  animation-delay: 0.7s;
}

/* ‚ùÑÔ∏è Frost Overlay - Effetto ghiaccio */
@keyframes frostShimmer {
  0%, 100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.6;
  }
}

/* üëÅÔ∏è Cursed Aura - Impulso malvagio */
@keyframes cursedPulse {
  0%, 100% {
    opacity: 0.5;
    filter: brightness(1);
  }
  50% {
    opacity: 0.8;
    filter: brightness(1.2);
  }
}

/* üé¨ Vignette Cinema - Grana pellicola */
.character-card::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: 
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.03) 2px,
      rgba(0,0,0,0.03) 4px
    );
  z-index: 5;
  opacity: 0.5;
}

/* ‚ú® Effetto gloss/reflesso su hover */
.character-card::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255,255,255,0.1) 50%,
    transparent 70%
  );
  transform: translateX(-100%) rotate(45deg);
  transition: transform 0.6s;
  pointer-events: none;
  z-index: 10;
}

.character-card:hover::after {
  transform: translateX(100%) rotate(45deg);
}
